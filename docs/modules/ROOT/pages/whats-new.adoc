= What's New in Antora
:route: New
:doctype: book
:url-releases-asciidoctor: https://github.com/asciidoctor/asciidoctor/releases
:url-releases-asciidoctorjs: https://github.com/asciidoctor/asciidoctor.js/releases
:url-gitlab: https://gitlab.com
:url-git-antora: {url-gitlab}/antora/antora
:url-issues: {url-git-antora}/issues
:url-milestone-2-1: {url-issues}?milestone_title=v2.1.0&scope=all&state=closed
:url-mr: {url-git-antora}/merge_requests

= Antora 2.1.0

_**Release date:** 2019.08.27 | *Milestone (closed issues):* {url-milestone-2-1}[v2.1.0^]_

The Antora 2.1.0 release provides more image capabilities, adds a new page attribute and playbook key, and improves path handling for 404 pages and rewrite rules.

== Reference images from other modules, components, and versions using Antora's resource ID

Antora 1.1 introduced the resource ID for referencing xref:asciidoc:include-partial.adoc[partial] and xref:asciidoc:include-example.adoc[example files] stored in other modules, components, and versions.
Now you can use the resource ID to reference images in the AsciiDoc image macro, too!

```
image::module-b:image.png[]

image::2.0@image.png[]
```

//See xref:asciidoc:insert-image.adoc[Insert an Image] for more image macro and resource ID examples and xref:page:resource-id.adoc[Resource Identifier] to learn more about Antora's resource ID.
See <<deprecation>> for future image referencing changes.

== The assets folder is now optional

You no longer have to store your images and attachments inside the [.path]_assets_ folder.
These folders can be top-level folders inside a module.

....
modules/
  ROOT/
    pages/
    images/
    attachments/
    partials/
    examples/
....

And don't worry if you prefer using the assets folder or currently have files in an assets folder, Antora still collects images and attachments stored in the assets folder.
//See xref:component-structure.adoc[Organizing Your Documentation for Antora] and xref:modules.adoc[Modules] to learn more about how to organize your documentation source files.

== More new features and improvements

Control the git repository URL suffix with ensureGitSuffix:: The new playbook key `ensureGitSuffix` instructs the git client to automatically append .git to the repository URL if it is absent.
You don't have to add this key to your Antora playbook if you're using GitHub or GitLab because Antora automatically sets `ensureGitSuffix` to `true` by default.
However, if you use Team Foundation Server (TFS) or Azure DevOps, set `ensureGitSuffix: false` under the `git` category of your playbook if your content source repositories fail to clone.

Access implicit page attributes from navigation files:: Antora's implicit xref:page:page-and-site-attributes.adoc#page-attributes[page attributes] can now be used in AsciiDoc navigation files.

Unresolved cross references and their link text:: The link text of an unresolved page reference is now displayed with the page ID when an xref can't be resolved.

Access a page's display version:: The component display version is now accessible via the implicit page attribute `page-component-display-version`.
This attribute contains the display version value found in the component descriptor ([.path]_antora.yml_).

404 pages and site paths:: Antora automatically prepends the site path (pathname of site URL) to `siteRootPath` and `uiRootPath` on the 404 page.

== Fixes

Issue {url-issues}/258[258^]:: The pathname of the site URL (site path) is now assigned to the `site.path` property in the UI model.
An empty string is used if the site URL is not set or the pathname is `/`.
To get the full fix, you must update your UI.

Issue {url-issues}/468[468^]:: A site URL's trailing slash is now removed before it's used to compute rewrite rules.

[#deprecation]
== Scheduled deprecations for Antora 3.0

The ability to use parent references in the target of the AsciiDoc image macro (e.g., `image::../../../module-b/_images/image-filename.png[]`) will be deprecated in Antora 3.0.
You should begin replacing any such image targets with resource IDs.

== Antora 1.1 EOL

Antora 1.1 reaches its end of life on August 31, 2019.
If you're using Antora 1.1, review the xref:2.0@whats-new.adoc#antora-2-0-0[Antora 2.0 release notes] and xref:2.0@whats-new.adoc#checklist[upgrade checklist] before upgrading to the latest Antora release.
